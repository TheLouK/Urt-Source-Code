Index: code/server/sv_ccmds.c
===================================================================
--- code/server/sv_ccmds.c	(revision 615)
+++ code/server/sv_ccmds.c	(working copy)
@@ -1049,6 +1049,82 @@
 	SV_Shutdown( "killserver" );
 }
 
+/*
+==================
+SV_ForceCvar_f_helper
+
+Called internally by SV_ForceCvar_f.
+==================
+*/
+static void SV_ForceCvar_f_helper( client_t *cl ) {
+	int		setValueForKeyRet;
+	char		*userinfoChangedRet;
+
+	// Who knows what would happen if we called the VM with a GAME_CLIENT_USERINFO_CHANGED
+	// when this client wasn't connected.
+	if (cl->state < CS_CONNECTED) {
+		return;
+	}
+
+	// We already check that Cmd_Argv(2) has nonzero length.  If Cmd_Argv(3) has zero length,
+	// the key will just be removed.  Don't use the silent version of this function so that the
+	// admin can see the error message.
+	setValueForKeyRet = Info_SetValueForKey(cl->userinfo, Cmd_Argv(2), Cmd_Argv(3));
+	if (setValueForKeyRet > 0) {
+		SV_DropClient(cl, "userinfo string length exceeded");
+		return;
+	}
+	if (setValueForKeyRet < 0) {
+		// The admin already saw the error message for illegal characters.
+		return;
+	}
+
+	userinfoChangedRet = SV_UserinfoChanged(cl);
+	if (userinfoChangedRet && userinfoChangedRet[0]) { return; }
+	VM_Call(gvm, GAME_CLIENT_USERINFO_CHANGED, cl - svs.clients);
+}
+
+/*
+==================
+SV_ForceCvar_f
+
+Set a cvar for a user.
+==================
+*/
+static void SV_ForceCvar_f(void) {
+	client_t	*cl;
+	int		i;
+
+	// Make sure server is running.
+	if (!com_sv_running->integer) {
+		Com_Printf("Server is not running.\n");
+		return;
+	}
+
+	if (Cmd_Argc() != 4 || strlen(Cmd_Argv(2)) == 0) {
+		Com_Printf("Usage: forcecvar <player name> <cvar name> <cvar value>\nPlayer may be 'allbots'\n");
+		return;
+	}
+
+	cl = SV_GetPlayerByHandle();
+	if (!cl) {
+		if (!Q_stricmp(Cmd_Argv(1), "allbots")) {
+			for (i = 0, cl = svs.clients; i < sv_maxclients->integer; i++, cl++) {
+				if (!cl->state) {
+					continue;
+				}
+				if(cl->netchan.remoteAddress.type != NA_BOT) {
+					continue;
+				}
+				SV_ForceCvar_f_helper(cl);
+			}
+		}
+		return;
+	}
+
+	SV_ForceCvar_f_helper(cl);
+}
+
 ////////////////////////////////////////////////////
 // separator for forcecvar.patch and incognito.patch
 ////////////////////////////////////////////////////
@@ -1118,6 +1194,7 @@
 	Cmd_AddCommand("exceptdel", SV_ExceptDel_f);
 	Cmd_AddCommand("flushbans", SV_FlushBans_f);
 
+	Cmd_AddCommand("forcecvar", SV_ForceCvar_f);
 	////////////////////////////////////////////////////
 	// separator for forcecvar.patch and incognito.patch
 	////////////////////////////////////////////////////
